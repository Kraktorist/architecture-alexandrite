## Планирование: анализ, идентификация проблем и поиск решений

1. Проанализируйте схему и описание системы. Идентифицируйте существующие и потенциальные проблемные места. Напишите их список.

1. Разработайте инициативы, которые необходимы для устранения нежелательных ситуаций. Запишите их в список.

1. Расставьте инициативы в порядке приоритета. 

| Проблема                                                                                                                                                                                                                                                                                                                                                | Приоритет | Инициатива                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| \- Клиенты жалуются менеджерам по продажам, что они не получили заказ и над их изделием работают уже несколько месяцев, хотя обещали закончить за три недели.<br>\- Жалоб от клиентов на просроченные заказы стало больше с открытием API для других продавцов<br>\- Представители компаний-заказчиков ежедневно сообщают, что не получили свои заказы. | 1         | 1\. Внедрение мониторинга потока заказов:<br>\- Общее количество активных заказов как базовая метрика загруженности компании<br>\- Количество заказов по статусам операции даст понимание загруженности (узких мест) отдельных этапов процесса в том числе в динамике<br>\- Мониторинг времени выполнения заказов по квантилям<br>1\. Сбор метрик с платформенных сервисов (RabbitMQ, Postgresql) для поиска корреляций с проблемными заказами<br>1\. Централизованное логирование событий, относящихся к заказам<br>1\. Трейсинг заказов<br> |
| Система долго прогружает первую страницу MES                                                                                                                                                                                                                                                                                                            | 2         | 1\. Анализ производительности этапов загрузки страницы<br>1\. Анализ подсистем, влияющих на загрузку:<br>\- веб-сервера<br>\- субд<br>\- сеть<br>1\. Проработка возможных улучшений<br>\- индексы в БД<br>\- CQRS<br>\- кэширование<br>1\. Разработка и постоянный мониторинг метрик, относящихся к загрузке страницы<br>                                                                                                                                                                                                                     |
| Долгий расчет модели в MES                                                                                                                                                                                                                                                                                                                              | 2         | 1\. Внедрение системы параллельного расчета моделей<br>1\. Внедрение метрик для ключевых характеристик подсистемы (время, загрузка)                                                                                                                                                                                                                                                                                                                                                                                                           |
| Каждое приложение имеет по одному инстансу                                                                                                                                                                                                                                                                                                              | 1         | 1\. Внедрение балансировки для отказоустойчивости                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| Базы данных имеют один инстанс, который работает на запись и на чтение                                                                                                                                                                                                                                                                                  | 2         | 1\. Внедрение паттерна CQRS:<br>1\. кластеризация active-passive<br>1\. использование выделенных реплик для аналитических целей                                                                                                                                                                                                                                                                                                                                                                                                               |
| Ручное тестирование вместо автоматического                                                                                                                                                                                                                                                                                                              | 2         | 1\. Внедрить инициативы QA-специалиста по автоматизации<br>1\. Внедрить метрики производительности QA процессов как части процесса разработки<br>1\. Найм дополнительных специалистов по необходимости                                                                                                                                                                                                                                                                                                                                        |
| Задержки в исправлении багов более одного месяца                                                                                                                                                                                                                                                                                                        | 1         | 1\. Анализ процесса разработки<br>1\. Внедрение метрик производительности процесса разработки<br>1\. Найм дополнительных специалистов<br>1\. Изменение частоты деплоев хотфиксов                                                                                                                                                                                                                                                                                                                                                              |
| Ручной деплой                                                                                                                                                                                                                                                                                                                                           | 3         | 1\. Внедрение автоматизированного деплоя для ускорения процесса разработки<br>1\. DORA метрики

Опишите ход своих рассуждений и ответьте на вопросы:

- Какой вы видите целевую архитектуру через полгода?
- Если бы у вас была возможность выполнить только три пункта из списка инициатив в ближайшие полгода, что бы вы выбрали и почему? Не обязательно добавлять в список только эпики. Вы можете включить в план как крупные изменения, так и локальные задачи.

В настоящий момент система представляет из себя черный ящик: вся информация о багах поступает от внешних пользователей, так как метрик внутри системы для этого недостаточно. По этой причине разработчики и тестировщики тратят много времени на дебаг. 

Инструментов для такого анализа недостаточно. Подсистемы (магазин, CRM и MES) слабо связаны между собой, централизованные системы для слежения и дебага отсутствуют. От этого страдают не только пользователи, но и замедляется процесс доработки системы. Улучшения здесь не ожидается, поскольку количество клиентов будет прирастать, а значит прирастет и количество bug reports.  

---
Для улучшения ситуации требуются следующие мероприятия:

1. **Дополнительный наем сотрудников, обоснованный увеличением количества клиентов и заказов, а также планирующимися доработками системы.

1. Внедрение инструментов observability, в частности мониторинга, позволяющего отвечать на вопросы о том, какой поток заказов проходит через систему, как они распределены внутри системы, какова производительность отдельных подсистем, каковы задержки на всех этапах, даст возможность выявить узкие места в системах и сконцентрировать усилия на них.

1. Логгинг и трейсинг упростит процесс работы с багами пользователей, и должен качественно изменить процессы разработки, облегчив и ускорив этап первичного сбора информации и анализа.

1. Автоматизация процессов тестирования и деплоя, позволят не только ускорить доставку изменений и хотфиксов, но, возможно, высвободит ресурсы для развития инфраструктуры, что позволит проработать вопросы производительности, отказоустойчивости и потери данных.

